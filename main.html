<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IEEE-754 Binary-32 Floating Point Translator</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 50px;
        }
        .form-group label {
            font-weight: bold;
        }
        .results {
            margin-top: 30px;
        }
        .results .card {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center">IEEE-754 Binary-32 Floating Point Translator</h2>
        <p class="text-center">Convert between binary, hexadecimal, and decimal representations of IEEE-754 Binary-32 floating point numbers.</p>
        <form>
            <div class="form-group">
                <label for="inputType">Input Type:</label>
                <select class="form-control" id="inputType" onchange="toggleInputFields()">
                    <option value="hex">8-digit Hexadecimal</option>
                    <option value="binary">32-bit Binary</option>
                </select>
            </div>
            <div class="form-group" id="hexInputField">
                <label for="hexInput">8-digit Hex Input:</label>
                <input type="text" class="form-control" id="hexInput" placeholder="Enter 8-digit hexadecimal value">
            </div>
            <div class="form-group" id="binaryInputField" style="display: none;">
                <label for="binaryInput">32-bit Binary Input:</label>
                <input type="text" class="form-control" id="binaryInput" placeholder="Enter 32-bit binary value (separated by spaces)">
                <small class="form-text text-muted">Format: 1 bit for sign, 8 bits for exponent, 23 bits for mantissa (e.g., 0 10000001 01000000000000000000000).</small>
            </div>
            <div class="form-group">
                <label for="decimalType">Decimal Output Type:</label>
                <select class="form-control" id="decimalType">
                    <option value="fixed">Fixed Point</option>
                    <option value="floating">Floating Point</option>
                </select>
            </div>
            <button type="button" class="btn btn-primary" onclick="convert()">Convert</button>
        </form>
        <div class="results">
            <div class="card">
                <div class="card-header">
                    <strong>Decimal:</strong>
                    <button class="btn btn-secondary btn-sm float-right" onclick="copyToNotepad()">Copy to Notepad</button>
                </div>
                <div class="card-body">
                    <p class="card-text" id="decimalResult"></p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function toggleInputFields() {
            const inputType = $('#inputType').val();
            if (inputType === 'hex') {
                $('#hexInputField').show();
                $('#binaryInputField').hide();
            } else {
                $('#hexInputField').hide();
                $('#binaryInputField').show();
            }
        }

        function convert() {
            $('#decimalResult').text(''); // Clear previous result

            const inputType = $('#inputType').val();
            let decimalResult = '';

            if (inputType === 'hex') {
                const hexInput = $('#hexInput').val();
                if (isValidHex(hexInput)) {
                    decimalResult = hexToDecimal(hexInput);
                } else {
                    alert('Invalid Hexadecimal Input');
                    return;
                }
            } else {
                const binaryInput = $('#binaryInput').val().replace(/\s+/g, '');
                if (isValidBinary(binaryInput)) {
                    decimalResult = binaryToDecimal(binaryInput);
                } else {
                    alert('Invalid Binary Input');
                    return;
                }
            }

            const decimalType = $('#decimalType').val();
            if (decimalType === 'fixed') {
                decimalResult = Number(decimalResult).toFixed(2); // Adjust for fixed-point representation
            }

            $('#decimalResult').text(decimalResult);
        }

        function isValidHex(hex) {
            return /^[0-9A-Fa-f]{8}$/.test(hex);
        }

        function isValidBinary(binary) {
            return /^[01]{32}$/.test(binary);
        }

        function hexToDecimal(hex) {
            // Implement hexadecimal to decimal conversion logic for IEEE-754 Binary-32
            // Placeholder logic:
            const binary = parseInt(hex, 16).toString(2).padStart(32, '0');
            return binaryToDecimal(binary);
        }

        function binaryToDecimal(binary) {
            // Implement binary to decimal conversion logic for IEEE-754 Binary-32
            // Placeholder logic:
            const sign = parseInt(binary[0], 2);
            const exponent = parseInt(binary.slice(1, 9), 2) - 127;
            const mantissa = '1' + binary.slice(9);
            let mantissaValue = 0;

            for (let i = 0; i < mantissa.length; i++) {
                mantissaValue += parseInt(mantissa[i], 2) * Math.pow(2, -i);
            }

            const decimal = (sign ? -1 : 1) * mantissaValue * Math.pow(2, exponent);
            return decimal;
        }

        function copyToNotepad() {
            const decimalResult = $('#decimalResult').text();
            if (decimalResult) {
                const notepadWindow = window.open('', 'notepad');
                notepadWindow.document.write('<pre>' + decimalResult + '</pre>');
                notepadWindow.document.close();
            } else {
                alert('No result to copy.');
            }
        }
    </script>
</body>
</html>
